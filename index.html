<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Docker-dropwizard-example by bspindler</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Docker-dropwizard-example</h1>
        <h2>Example docker image which runs a dropwizard application, extending to report to add StatsDReporter</h2>

        <section id="downloads">
          <a href="https://github.com/bspindler/docker-dropwizard-example/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/bspindler/docker-dropwizard-example/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/bspindler/docker-dropwizard-example" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="docker-dropwizard-image" class="anchor" href="#docker-dropwizard-image" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Docker Dropwizard image</h1>

<p>Example Docker image for running a Dropwizard Application in a container.</p>

<p>Requires:</p>

<ul>
<li><a href="https://www.docker.com/">Docker</a></li>
<li><a href="http://boot2docker.io/">Boot2Docker</a></li>
<li>JDK (to compile java file locally)</li>
<li>
<a href="https://gradle.org/">Gradle</a> (for build automation)</li>
</ul>

<p>To run locally:</p>

<pre><code>gradle run
# ./go
</code></pre>

<p>To build docker image:</p>

<pre><code>gradle dockerBuildImage
# ./dockerBuildImage.sh (requires oneJar task to build dropwizard application)
</code></pre>

<p>To run docker image:</p>

<pre><code>gradle dockerRunImage
./dockerRunImage.sh (requires built image)
</code></pre>

<p>When image is running use <code>boot2docker ip</code> to get the docker IP and <code>docker ps</code> to see the port assigned to the container port 8080, then curl <code>http://&lt;dockerip&gt;:&lt;port&gt;/hello</code> to call the dropwizard application running in the container.</p>

<p>If using LINUX you can use localhost and have to <code>sudo</code> docker commands.</p>

<h2>
<a id="details" class="anchor" href="#details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Details</h2>

<p>This is a bare bones example for building an image for running a single Dropwizard application. It uses the standard docker java:jre-8 image as base, copies necessary files into image into folder <code>/opt/dropwizard</code> and runs command to start dropwizard application.</p>

<p>Dockerfile:</p>

<pre><code>FROM java:8-jre
COPY config.yml /opt/dropwizard/
COPY build/libs/docker-dropwizard-application-standalone.jar /opt/dropwizard/
EXPOSE 8080
WORKDIR /opt/dropwizard
CMD ["java", "-jar", "-Done-jar.silent=true", "docker-dropwizard-application-standalone.jar", "server", "config.yml"]
</code></pre>

<h2>
<a id="conclusions" class="anchor" href="#conclusions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Conclusions</h2>

<p>This is a simple way of defining a disposal container for a dropwizard application, taking effort away from operations and making the development team responsible for how their application will be hosted and run. Your application will be completely isolated from other parts of your solution running on the same host machine, including other instances of the same application for scaling and redundancy.</p>

<p>Instead of thinking of instances of your application, you have instances of your container image, hosted on one or more docker hosts depending on your architecture. Used correctly, you can create container instances as needed, kill when done, using versioning of images to release new versions of the service.</p>

<p>Things to consider:</p>

<ul>
<li>How to extract information from running container instance application (logging, performance monitoring etc.)</li>
<li>Port management, how to create new containers with dynamic port allocation (to avoid collisions) while still balancing load between them</li>
<li>General release management using Docker</li>
</ul>
      </section>
    </div>

    
  </body>
</html>
